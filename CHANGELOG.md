# 📋 更新日志 (CHANGELOG)

所有重要的项目更改都将记录在此文件中。

## [v1.0.0-dev] - 2025-08-06

### ✨ 新增功能
- **点赞系统**: 实现每用户每评论只能点赞一次的智能点赞功能
- **权限控制**: 评论权限预检查，根据用户参与状态动态显示按钮
- **内联表单**: 评论表单改为内联展开模式，提升用户体验
- **视觉反馈**: 点赞状态用不同颜色和填充样式区分

### 🔧 改进优化
- **界面设计**: 评论表单背景从弹窗改为渐变背景的内联卡片
- **数据安全**: 解决外键约束问题，删除评论时自动清理点赞记录
- **API优化**: 合并点赞/取消点赞API，提供统一的切换接口

### 🐛 问题修复
- **删除约束**: 修复评论删除时的外键约束错误
- **权限检查**: 修复评论权限检查的用户认证问题
- **状态同步**: 修复点赞状态的前端显示同步问题

### 📚 文档更新
- **设计文档**: 更新CommentLike实体描述和API接口文档
- **README**: 更新功能特色和社交功能描述
- **实体关系**: 更新数据库实体关系图

---

## [v1.0.0-beta] - 2025-08-05

### ✨ 新增功能
- **评论系统**: 完整的评论CRUD功能，支持星级评分
- **权限验证**: 只有参与过活动的用户才能评论
- **评分统计**: 自动计算活动平均评分

### 🔧 改进优化
- **用户体验**: 优化评论表单界面设计
- **权限反馈**: 为无权限用户提供清晰的提示信息

---

## [v0.9.0] - 2025-08-01

### ✨ 新增功能
- **订单系统**: 完整的订单管理和模拟支付功能
- **支付流程**: 报名审核通过后自动创建订单
- **退款功能**: 支持订单取消和退款操作

### 🔧 改进优化
- **认证机制**: 修复用户认证问题，使用Headers认证
- **数据统计**: 修复活动参与人数统计

---

## [v0.8.0] - 2025-07-31

### ✨ 新增功能
- **报名系统**: 在线报名、审核流程、状态管理
- **活动管理**: 完整的活动CRUD操作
- **用户系统**: 注册登录、个人资料管理

### 🏗️ 架构搭建
- **前端**: React 18 + Vite + Tailwind CSS
- **后端**: Node.js + TypeScript + Midway.js + TypeORM
- **数据库**: SQLite 本地开发数据库

---

## 📝 版本说明

- **v1.x.x**: 正式版本，功能完整稳定
- **v0.x.x**: 开发版本，功能逐步完善
- **dev**: 开发分支，包含最新功能

## 🔄 升级指南

### v0.9.0 → v1.0.0
1. 数据库迁移：添加CommentLike表
2. 依赖更新：无新增依赖
3. 配置变更：无配置变更

### 注意事项
- 评论删除功能需要新的数据库约束处理
- 点赞功能需要用户登录状态验证
- 建议在测试环境先验证所有功能

---

*更新日志按照 [Keep a Changelog](https://keepachangelog.com/) 格式维护*
